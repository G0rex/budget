$(".results").html("<%= escape_javascript(render partial: 'search_e_data') %>");

if (barChart) {
  barChart.destroy();
}

<%- unless params['payers_edrpous'].blank? %>
  var label = [];
  var data_set = [];

  <%- @receivers.each do |payment| %>
    label.push('<%= payment[:name].html_safe %>');
    data_set.push(<%= '%.2f' % payment[:val] %>);
  <%- end %>

  var data = {
    labels: label,
    datasets: [
      {
        label: I18n.t('modules.classifier.search_data.total'),
        backgroundColor: '#628DB6',
        hoverBackgroundColor: '#ffd304',
        data: data_set
      }
    ]
  };

  var ctx = $('#barChart').get(0);
  var options = {
    title: {
      display: true,
      fontSize: 18,
      fontColor: '#0c2231',
      text: I18n.t('modules.classifier.search_data.most_received')
    },
//    hover: {
//      mode: 'dataset'
//    },
//    tooltips: {
//      mode: 'single'
//    },
    legend: {
      display: false
    },
    scales: {
      xAxes: [{
        gridLines: {
          display: false
        },
        categoryPercentage: 0.5,
        ticks: {
          maxRotation: 0
        }
      }],
      yAxes: [{
        gridLines: {
          display: false
        }
      }]
    }
  };
  var barChart = new Chart(ctx, {
    type: 'bar',
    data: data,
    options: options
  });

<%- end %>