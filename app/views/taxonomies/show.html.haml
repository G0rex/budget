- model_class = BudgetFile

= content_for :header do
  .head
    %i.fa.fa-money
    #{t('.title')}:
    %span.descr
      #{@taxonomy.title}, #{@taxonomy.owner}

  %ul.nav.nav-tabs.pull-left{role: 'tablist'}
    %li.active
      %a{href: '#bubbletree', role: 'tab', 'data-toggle' => 'tab'}
        = t('.tab_bubbletree')
    -#%li
    -#  %a{href: '#sunburst', role: 'tab', 'data-toggle' => 'tab'}
    -#    = t('.tab_sunburst')
    %li
      %a{href: '#sunburst_seq', role: 'tab', 'data-toggle' => 'tab'}
        = t('.tab_sunburst_seq')
    %li
      %a{href: '#treemap', role: 'tab', 'data-toggle' => 'tab'}
        = t('.tab_treemap')
    %li
      %a{href: '#icicle', role: 'tab', 'data-toggle' => 'tab'}
        = t('.tab_icicle')
    %li
      %a{href: '#circles', role: 'tab', 'data-toggle' => 'tab'}
        = t('.tab_circles')
    %li
      %a{href: '#collapsible', role: 'tab', 'data-toggle' => 'tab'}
        = t('.tab_collapsible')

.budget

  .tab-content
    %iframe{ 'width' => '100%', 'height' => '800' }

  .embed
    = render partial: 'embed'



= link_to t('.back', :default => t("helpers.links.back")), taxonomies_path, :class => 'btn btn-default'


:javascript
  $(document).on('ready page:change', function() {
    function set_visiframe(visualizator) {
      frame_url = "#{root_url}widgets/visify/"+ visualizator + "/#{@taxonomy.id}"
      $('.embed input').val("<iframe width='900' height='600' src='" + frame_url + "'></iframe>")
      $('.tab-content iframe').attr('src', frame_url)

    }

    set_visiframe('bubbletree')

    $('a[role="tab"]').on('shown.bs.tab', function (e) {
      set_visiframe(this.href.split('#')[1])
    });
  })
