%button#export.btn.btn-primary
  %i.fa.fa-file-image-o
  -#= t('export')

:javascript

  $(document).ready(function() {
    $.when(
      $.getScript( "/assets/html2canvas/html2canvas.js" ),
      $.getScript( "/assets/html2canvas/html2canvas.svg.js" ),
      $.Deferred(function( deferred ){
          $( deferred.resolve );
      })
    ).done(function(){
      $('#export').on('click', function() {
        html2canvas($("#{container}"), {
          //logging: true,
          background :'#FFFFFF',
          onrendered: function(canvas) {
            //document.body.appendChild(canvas);
            var canvasdata = canvas.toDataURL("image/png");

            var theEvent = document.createEvent("MouseEvent");
            theEvent.initMouseEvent("click", true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
            var a = document.createElement("a");
            a.download = "sample.png";
            a.href = canvasdata;
            a.dispatchEvent(theEvent);
          }
        });
      })
    })
  });
