#sidebar_table

:javascript
  function aSidebarTable() {
    var margin = {top: 20, right: 20, bottom: 30, left: 50},
        width, height;
    var self;

    function hide() {
      $("#sidebar_table").height(0).html('')
    }


    return {
      initialize: function(height, options) {
        width = $('#sidebar_chart').width() - margin.left - margin.right
        self = this;
        self.clickCallback = options.clickCallback;
      },
      hide: hide,
      show: function(data) {
        hide()

        if (data == null)
          return

        $("#sidebar_table").height('auto')

        div = '<table class="table table-striped table-hover">\
                 <thead>\
                 <tr>\
                   <th class="col-sm-6">Напрямок видатків</th>\
                   <th class="col-sm-2">план, грн.</th>\
                   <th class="col-sm-2">факт, грн.</th>\
                   <th class="col-sm-2">%</th>\
                 </tr>\
               </thead><tbody>'
        $.each(data, function( index, value ) {
          var totalSize;
          if (value.parent) {
            totalSize = value.parent.amount;
          } else {
            totalSize = value.amount;
          }
          div += '<tr class="tr_nodes">'
            + '<td><div style="float: left; margin-right: 10px; margin-top: 4px; width:10px; height:10px; background-color:' + value.color + '"></div>'
            + value.label + '</td>'
            + '<td>' + aVisify.helpers.formatNumber(value.amount) + '</td>'
            + '<td>' + aVisify.helpers.formatNumber(value.amount_fact || 0) + '</td>'
            + '<td>' + aVisify.helpers.getPercentageString(value.amount, totalSize) + '</td>'
            + '</tr>'
        });
        div += '</tbody></table>'

        $('#sidebar_table').html(div);

        d3.selectAll(".tr_nodes")
            .style("cursor", "pointer")
            .on("click", function(d, i) {
                console.log(data[i])
                 self.clickCallback(data[i]);
               });
      },
    }
  }