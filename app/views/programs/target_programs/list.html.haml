:css
  .table > thead > tr > td, .table > tbody > tr > td, .table > tfoot > tr > td {
    vertical-align: middle;
  }

  td a {
    font-size: 1.1em;
  }

  .datepicker-dropdown.dropdown-menu {
    background-color: #ffffff;
  }

= content_for :header do
  .head.pull-left
    = t('programs.target_programs.index.header') + @town.name

.col-sm-12{'style' => 'position: relative;'}
  .input-daterange.pull-left{'style' => 'margin-right: 10px;'}
    = t('programs.target_programs.list.data_header')
    %input{name: :term_end, :type => "text", :class => "year_datepicker form-control" }
  %span{'style' => 'position: absolute; bottom: 0px;'}
    %i{ :class => "fa fa-lg fa-square-o", :style => "color: #F0E72C;" }
    = t('programs.target_programs.list.active_programs')
    %i{ :class => "fa fa-lg fa-check-square-o", :style => "color: #2C9911;" }
    = t('programs.target_programs.list.accomplished_programs')

- if @programs_target_programs.length > 0
  %table.table.table-striped
    %thead
      %tr
        %th
        %th
    %tbody
      - @programs_target_programs.each do |programs_target_program|
        %tr
          %td
            - color = programs_target_program.programs_town.explanation['kfkv'][programs_target_program.kfkv]['color']
            - if color == ''
              - color = '#0b387c'
            %i{ :class => "fa fa-2x #{programs_target_program.programs_town.explanation['kfkv'][programs_target_program.kfkv]['icon']}",
                :style => "color: #{color};" }
          %td
            = link_to programs_target_program.title, programs_target_program
            %br
              = render 'programs/target_programs/progressbar', :amounts => @amounts[programs_target_program.id.to_s]
              - if programs_target_program.term_end.to_i > 2015
                %i{ :class => "fa fa-lg fa-square-o", :style => "color: #F0E72C;" }
              - else
                %i{ :class => "fa fa-lg fa-check-square-o", :style => "color: #2C9911;" }
          %td
            = link_to t('form.edit'), edit_programs_target_program_path(programs_target_program), :class => 'btn btn-default btn-xs'
            = link_to t('form.destroy', :default => t("helpers.links.destroy")), programs_target_program, :method => "delete", :town => @town.id, :data => { :confirm => t('form.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) }, :class => 'btn btn-danger btn-xs'
  %br

= link_to t('form.back'), programs_towns_path, :class => 'btn btn-default'
= link_to t('form.explanation'), edit_programs_town_path(@town.id), :class => 'btn btn-primary'

:javascript

  $(document).ready(function() {
    $.fn.datepicker.dates[window.aHelper.lang()];
      $(".year_datepicker").datepicker( {
        format: 'dd.mm.yyyy',
        startView: 2,
        endDate: '+0y',
        multidate: true,
        language: window.aHelper.lang(),
        autoclose: true,
        minViewMode: 'years',
        viewMode: 'years',
        pickTime: false
      });

      var currYear = new Date().getFullYear();
      var startDate = new Date(currYear,0,1);
      $('.year_datepicker').datepicker('setDate', startDate);
  })