=bootstrap_form_for @program do |f|
  =f.text_field :title
  =f.text_field :town,label: t('.town')


  =label_tag 'type_program',t('.new_program')
  =radio_button_tag 'type', 'program'
  =label_tag 'type_subprogram',t('.sub_program')
  =radio_button_tag 'type', 'subprogram',true

  =f.select :p_id,get_main_programs.map{|m_programs| [m_programs.title,m_programs.id]},label: t('.parent_id'),prompt: t('.choose_p_id')
  =f.text_field :description,as: :text,label: t('.description')
  =f.text_field :responsible,label: t('.responsible')
  =f.submit t('save')
:javascript
  $(document).ready(function(){
    $('input[name=type]:radio').change(function(){
      $('#programs_target_program_p_id').parents('.form-group').toggle('slow');
    });

    $('#programs_target_program_description').summernote({
      minHeight: 300
    });

    $('form').submit(function(){
      var checked_radio_value = $('input[name=type]:checked').val();
      var parent_id_input = $('#programs_target_program_p_id');
      var program_name = 'program';

      var notice_message = $("<div></div>");
      notice_message.addClass('alert alert-warning');
      notice_message.attr('role','alert');
      notice_message.html('Заповніть це поле');

      if(checked_radio_value == program_name){
        parent_id_input.val('');
      }else{
        if(!parent_id_input.val()){
          parent_id_input.after(notice_message);
          notice_message.fadeOut(5000);
          parent_id_input.focus();
          return false;
        }
      }
    });
    init_town_select2_with_field_id('#programs_target_program_town',"#{search_for_towns_town_path}")

  });
